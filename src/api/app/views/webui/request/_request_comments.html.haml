.bg-light
  %ul.nav.nav-tabs{ role: 'tablist' }
    %li.nav-item
      = link_to('#comments', class: 'nav-link text-nowrap active', data: { toggle: 'tab' }, role: 'tab') do
        Comments for request #{bs_request.number}
        %span.badge.badge-primary{ id: "comment-counter-request-#{bs_request.number}" }
          = comments.size
    - bs_request.superseding.includes(:comments).each do |superseded|
      - if superseded.comments.any?
        %li.nav-item
          = link_to("#superseded-#{superseded.number}", title: "This request was superseded by request #{superseded.superseded_by}",
            class: 'nav-link text-nowrap', data: { toggle: 'tab' }, role: 'tab') do
            Comments for request #{superseded.number}
            %span.badge.badge-primary{ id: "comment-counter-request-#{superseded.number}" }
              = superseded.comments.size
    - if stored_replies.any?
      %li.nav-item
        = link_to("#stored-replies-content-#{stored_replies.count}", title: "this is stored reploy",
          class: 'nav-link text-nowrap', data: { toggle: 'tab' }, role: 'tab') do
          Stored replies 
          %span.badge.badge-primary{ id: "stored-replies-#{stored_replies.count}" }
            = stored_replies.count
.card-body
  .tab-content
    .tab-pane.fade.show.active#comments
      = render partial: 'webui/comment/show', locals: { commentable: bs_request,
        comment_counter_id: "#comment-counter-request-#{bs_request.number}" }
    - bs_request.superseding.includes(:comments).each do |superseded|
      - if superseded.comments.any?
        .tab-pane.fade.show{ id: "superseded-#{superseded.number}" }
          = render partial: 'webui/comment/show', locals: { commentable: superseded,
            comment_counter_id: "#comment-counter-request-#{superseded.number}" }
    -# - if stored_replies.any?
    .tab-pane.fade.show{ id: "stored-replies-content-#{stored_replies.count}" }
      = render partial: 'webui/storedreply/show', locals: { replies: stored_replies,
        comment_counter_id: "#stored-replies-#{bs_request.number}" }
